<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Enquadramento NR-13</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
        }
        .container {
            background-color: #fff;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            text-align: center;
            width: 90%;
            max-width: 450px;
            margin: 25px auto;
        }
        h1 {
            color: #333;
            margin-bottom: 5px;
        }
        p.info {
            font-size: 14px;
            color: #666;
            margin-bottom: 20px;
        }
        .input-group {
            margin-bottom: 15px;
            text-align: left;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
        }
        input[type="number"], select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
        }
        .result-container {
            margin-top: 25px;
            padding: 15px;
            background-color: #e6f7ff;
            border: 1px solid #b3e0ff;
            border-radius: 5px;
            min-height: 80px;
            text-align: left;
        }
        .result-item {
            margin-bottom: 8px;
        }
        .result-label {
            font-weight: bold;
        }
        .categoria-destaque {
            font-weight: bold;
            color: #004d99;
            font-size: 1.2em; /* Aumenta a fonte para destaque */
        }
        .table-container {
            margin-top: 30px;
            overflow-x: auto;
            width: 90%;
            max-width: 450px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 12px;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        th {
            background-color: #007bff;
            color: white;
            white-space: nowrap;
        }
        td {
            white-space: nowrap;
        }
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        .footer {
            margin-top: auto;
            padding: 20px;
            text-align: center;
            color: #888;
            font-size: 12px;
            line-height: 1.2;
        }
        /* Nova tabela de resultados */
        .result-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        .result-table th, .result-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        /* Estilo para os valores dos resultados */
        .result-value {
            font-weight: bold;
            font-size: 1.1em; /* Fonte um pouco maior para os valores */
            color: #333;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Simulador de Enquadramento NR-13</h1>
        <p class="info">Verifique a categoria do equipamento conforme a NR-13.</p>
        <form id="calculadoraPV">
            <div class="input-group">
                <label for="pressao">Pressão (P) em MPa:</label>
                <input type="number" id="pressao" step="any" required>
            </div>
            <div class="input-group">
                <label for="volume">Volume (V) em m³:</label>
                <input type="number" id="volume" step="any" required>
            </div>
            <div class="input-group">
                <label for="fluido">Classe de Fluido:</label>
                <select id="fluido" required>
                    <option value="" disabled selected>Selecione a classe do fluido</option>
                    <option value="A">Classe A: Fluidos inflamáveis, combustíveis com temperatura ≥ 200°C, tóxicos ou corrosivos.</option>
                    <option value="B">Classe B: Outros fluidos com temperatura de operação ≥ 50°C.</option>
                    <option value="C">Classe C: Fluidos combustíveis com temperatura de operação < 200°C.</option>
                    <option value="D">Classe D: Vapor de água, ar comprimido, efluentes e gases inertes.</option>
                </select>
            </div>
        </form>

        <div class="result-container">
            <h3>Resultados do Enquadramento</h3>
            <table class="result-table">
                <tr>
                    <td class="result-label">PV:</td>
                    <td id="resultadoPV" class="result-value"></td>
                </tr>
                <tr>
                    <td class="result-label">Classe do Fluido:</td>
                    <td id="resultadoFluido" class="result-value"></td>
                </tr>
                <tr>
                    <td class="result-label">Grupo de Risco:</td>
                    <td id="resultadoGrupo" class="result-value"></td>
                </tr>
                <tr>
                    <td class="result-label">Categoria do Equipamento:</td>
                    <td id="resultadoCategoria" class="result-value"></td>
                </tr>
            </table>
        </div>
    </div>

    <div class="table-container">
        <table>
            <thead>
                <tr>
                    <th colspan="4">Classificação de Vaso de Pressão (NR-13)</th>
                </tr>
                <tr>
                    <th>Classe do Fluido</th>
                    <th>Grupo de Potencial de Risco</th>
                    <th>PV (MPa·m³)</th>
                    <th>Categoria</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td rowspan="5">A</td>
                    <td>1</td>
                    <td>PV > 100</td>
                    <td>I</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>10 < PV ≤ 100</td>
                    <td>II</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>2.5 < PV ≤ 10</td>
                    <td>III</td>
                </tr>
                <tr>
                    <td>4</td>
                    <td>0.1 < PV ≤ 2.5</td>
                    <td>IV</td>
                </tr>
                <tr>
                    <td>5</td>
                    <td>PV ≤ 0.1</td>
                    <td>V</td>
                </tr>
                <tr>
                    <td rowspan="5">B</td>
                    <td>1</td>
                    <td>PV > 100</td>
                    <td>I</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>10 < PV ≤ 100</td>
                    <td>II</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>2.5 < PV ≤ 10</td>
                    <td>III</td>
                </tr>
                <tr>
                    <td>4</td>
                    <td>1 < PV ≤ 2.5</td>
                    <td>IV</td>
                </tr>
                <tr>
                    <td>5</td>
                    <td>PV ≤ 1</td>
                    <td>V</td>
                </tr>
                <tr>
                    <td rowspan="4">C</td>
                    <td>1</td>
                    <td>PV > 100</td>
                    <td>I</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>10 < PV ≤ 100</td>
                    <td>II</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>2.5 < PV ≤ 10</td>
                    <td>III</td>
                </tr>
                <tr>
                    <td>5</td>
                    <td>PV ≤ 2.5</td>
                    <td>V</td>
                </tr>
                <tr>
                    <td rowspan="5">D</td>
                    <td>1</td>
                    <td>PV > 100</td>
                    <td>I</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>10 < PV ≤ 100</td>
                    <td>II</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>2.5 < PV ≤ 10</td>
                    <td>III</td>
                </tr>
                <tr>
                    <td>4</td>
                    <td>1 < PV ≤ 2.5</td>
                    <td>IV</td>
                </tr>
                <tr>
                    <td>5</td>
                    <td>PV ≤ 1</td>
                    <td>V</td>
                </tr>
            </tbody>
        </table>
    </div>

    <footer class="footer">
        HNR ENGENHARIA<br>
        Rua Rio Tejipió, 268 - Galpão Azul - Cordeiro - Recife - PE<br>
        CEP: 50721-640
    </footer>

    <script>
        const pressaoInput = document.getElementById('pressao');
        const volumeInput = document.getElementById('volume');
        const fluidoSelect = document.getElementById('fluido');
        const resultadoPVElement = document.getElementById('resultadoPV');
        const resultadoFluidoElement = document.getElementById('resultadoFluido');
        const resultadoGrupoElement = document.getElementById('resultadoGrupo');
        const resultadoCategoriaElement = document.getElementById('resultadoCategoria');

        pressaoInput.addEventListener('input', calcularPV);
        volumeInput.addEventListener('input', calcularPV);
        fluidoSelect.addEventListener('change', calcularPV);

        function getFluidoNome(fluido) {
            switch(fluido) {
                case 'A': return 'A';
                case 'B': return 'B';
                case 'C': return 'C';
                case 'D': return 'D';
                default: return 'Desconhecida';
            }
        }

        function getGrupoRisco(pv, fluido) {
            if (pv > 100) return "1";
            if (pv > 10) return "2";
            if (pv > 2.5) return "3";
            if (fluido === 'A') {
                if (pv > 0.1) return "4";
                return "5";
            }
            if (fluido === 'C') {
                return "5";
            }
            if (pv > 1) return "4";
            return "5";
        }

        function getCategoria(pv, fluido) {
            switch (fluido) {
                case 'A':
                    if (pv > 100) return "I";
                    if (pv > 10) return "II";
                    if (pv > 2.5) return "III";
                    if (pv > 0.1) return "IV";
                    return "V";
                case 'B':
                    if (pv > 100) return "I";
                    if (pv > 10) return "II";
                    if (pv > 2.5) return "III";
                    if (pv > 1) return "IV";
                    return "V";
                case 'C':
                    if (pv > 100) return "I";
                    if (pv > 10) return "II";
                    if (pv > 2.5) return "III";
                    return "V";
                case 'D':
                    if (pv > 100) return "I";
                    if (pv > 10) return "II";
                    if (pv > 2.5) return "III";
                    if (pv > 1) return "IV";
                    return "V";
                default:
                    return "Não foi possível definir.";
            }
        }

        function calcularPV() {
            const pressao_MPa = parseFloat(pressaoInput.value);
            const volume_m3 = parseFloat(volumeInput.value);
            const fluido = fluidoSelect.value;

            // Limpa resultados anteriores
            resultadoPVElement.innerHTML = '';
            resultadoFluidoElement.innerHTML = '';
            resultadoGrupoElement.innerHTML = '';
            resultadoCategoriaElement.innerHTML = '';

            if (isNaN(pressao_MPa) || isNaN(volume_m3) || fluido === "" || pressao_MPa <= 0 || volume_m3 <= 0) {
                resultadoPVElement.textContent = "Insira valores válidos e maiores que zero.";
                return;
            }

            const pv_valor = pressao_MPa * volume_m3;
            
            // Determina os resultados
            const fluidoNome = getFluidoNome(fluido);
            const grupoRisco = getGrupoRisco(pv_valor, fluido);
            const categoria = getCategoria(pv_valor, fluido);

            // Exibe os resultados na tabela
            resultadoPVElement.textContent = `${pv_valor.toFixed(2)} MPa·m³`;
            resultadoFluidoElement.textContent = fluidoNome;
            resultadoGrupoElement.textContent = grupoRisco;
            resultadoCategoriaElement.innerHTML = `<span class="categoria-destaque">${categoria}</span>`;
        }
    </script>
</body>
</html>